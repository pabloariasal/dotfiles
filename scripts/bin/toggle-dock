#!/bin/bash
DOCK_FILE="${HOME}/.docked"
DOCKED_ALACRITTY_CONFIG=~/.config/alacritty/docked_alacritty_overrides.yml
ALACRITTY_OVERRIDE=~/.alacritty_overrides.yml
if [[ -f "$DOCK_FILE" ]]; then
    echo "Switching to mobile setup"
    xrandr --output "HDMI2" --off --output "eDP1" --auto
    rm "$ALACRITTY_OVERRIDE"
    rm "$DOCK_FILE"
else
    echo "Switching to docked setup"
    xrandr --output "eDP1" --off --output "HDMI2" --auto
    ln -sr "$DOCKED_ALACRITTY_CONFIG" "$ALACRITTY_OVERRIDE"
    touch "$DOCK_FILE"
fi

touch ~/.config/alacritty/alacritty.yml
i3-msg restart
setxkbmap -option caps:escape
