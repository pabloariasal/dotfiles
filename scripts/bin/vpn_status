#!/bin/bash
vpn_connection=$(nmcli connection show --active | awk '$3 == "vpn" {print $1}')
if [ -z "$vpn_connection" ]; then
    vpn_connection="$(expressvpn status | grep 'Connected to' | sed 's/Connected to //g' | sed 's/\x1B\[[0-9;]\{1,\}[A-Za-z]//g')"
    if [ "$vpn_connection" == "Not connected" ]; then
        vpn_connection=""
    fi
fi
[ -z "$vpn_connection" ] && exit 1
echo "$vpn_connection"
