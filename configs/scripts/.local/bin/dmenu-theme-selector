#!/bin/bash

set -e

themes_dir=${DOTFILES}/themes
theme=$(ls ${themes_dir} | bemenu_wrapper -p 'Select a theme' -w -l 20 -c -B 1 -W '0.4')
source "${themes_dir}/$theme"

## Set alacritty colorscheme
alacritty_config_dir=${HOME}/.config/alacritty
ln -sf ${alacritty_config_dir}/colors/${ALACRITTY_COLOR_FILE} ${alacritty_config_dir}/alacritty_colors.yml
touch ${alacritty_config_dir}/alacritty.yml

## Set nvim colorscheme
nvim_config_dir=${HOME}/.config/nvim
echo ${NVIM_COLORSCHEME} > ${nvim_config_dir}/nvim_colorscheme.txt
echo ${NVIM_BACKGROUND} > ${nvim_config_dir}/nvim_background.txt

theme_without_suffix="${theme%.sh}"
echo "Theme '${theme_without_suffix}' selected!"
echo "$theme_without_suffix" > "${HOME}/.theme"
